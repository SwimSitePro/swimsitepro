 // Sample data structure - add remaining events following this pattern
 const eventData = {
    men: {
        SCY: {
            '50FR': [{x: 19.49, y: 1}, {x: 20.05, y: 10}, {x: 20.65, y: 20}, {x: 21.21, y: 30}, {x: 21.75, y: 40},{x: 22.26, y: 50}, {x: 22.74, y: 60}, {x: 23.21, y: 70}, {x: 23.66, y: 80}, {x: 24.09, y: 90},{x: 24.52, y: 100}],
            '100FR': [{x: 42.99, y: 1}, {x: 44.24, y: 10}, {x: 45.55, y: 20}, {x: 46.79, y: 30}, {x: 47.97, y: 40},{x: 49.10, y: 50}, {x: 50.17, y: 60}, {x: 51.20, y: 70}, {x: 52.19, y: 80}, {x: 53.15, y: 90},{x: 54.08, y: 100}],
            '200FR': [{x: 94.39, y: 1}, {x: 97.14, y: 10}, {x: 100.02, y: 20}, {x: 102.75, y: 30}, {x: 105.34, y: 40},{x: 107.80, y: 50}, {x: 110.16, y: 60}, {x: 112.43, y: 70}, {x: 114.60, y: 80}, {x: 116.70, y: 90},{x: 118.73, y: 100}],
            '500FR': [{x: 257.39, y: 1}, {x: 264.89, y: 10}, {x: 272.75, y: 20}, {x: 280.19, y: 30}, {x: 287.25, y: 40},{x: 293.98, y: 50}, {x: 300.41, y: 60}, {x: 306.58, y: 70}, {x: 312.51, y: 80}, {x: 318.23, y: 90},{x: 323.75, y: 100}],
            '1000FR': [{x: 536.99, y: 1}, {x: 552.63, y: 10}, {x: 569.04, y: 20}, {x: 584.56, y: 30}, {x: 599.29, y: 40},{x: 613.33, y: 50}, {x: 626.75, y: 60}, {x: 639.62, y: 70}, {x: 652.00, y: 80}, {x: 663.92, y: 90},{x: 675.44, y: 100}],
            '1650FR': [{x: 893.69, y: 1}, {x: 919.73, y: 10}, {x: 947.04, y: 20}, {x: 972.85, y: 30}, {x: 997.37, y: 40},{x: 1020.74, y: 50}, {x: 1043.08, y: 60}, {x: 1064.50, y: 70}, {x: 1085.10, y: 80}, {x: 1104.94, y: 90},{x: 1124.10, y: 100}],
            '100BK': [{x: 46.59, y: 1}, {x: 47.94, y: 10}, {x: 49.37, y: 20}, {x: 50.71, y: 30}, {x: 51.99, y: 40},{x: 53.21, y: 50}, {x: 54.37, y: 60}, {x: 55.49, y: 70}, {x: 56.56, y: 80}, {x: 57.60, y: 90},{x: 58.61, y: 100}],
            '200BK': [{x: 102.29, y: 1}, {x: 105.27, y: 10}, {x: 108.39, y: 20}, {x: 111.35, y: 30}, {x: 114.15, y: 40},{x: 116.83, y: 50}, {x: 119.38, y: 60}, {x: 121.84, y: 70}, {x: 124.19, y: 80}, {x: 126.46, y: 90},{x: 128.67, y: 100}],
            '100BR': [{x: 52.79, y: 1}, {x: 54.32, y: 10}, {x: 55.94, y: 20}, {x: 57.46, y: 30}, {x: 58.91, y: 40},{x: 60.29, y: 50}, {x: 61.61, y: 60}, {x: 62.88, y: 70}, {x: 64.09, y: 80}, {x: 65.26, y: 90},{x: 66.41, y: 100}],
            '200BR': [{x: 114.79, y: 1}, {x: 118.13, y: 10}, {x: 121.64, y: 20}, {x: 124.95, y: 30}, {x: 128.10, y: 40},{x: 131.10, y: 50}, {x: 133.97, y: 60}, {x: 136.73, y: 70}, {x: 139.37, y: 80}, {x: 141.92, y: 90},{x: 144.39, y: 100}],
            '100FL': [{x: 46.19, y: 1}, {x: 47.53, y: 10}, {x: 48.94, y: 20}, {x: 50.28, y: 30}, {x: 51.54, y: 40},{x: 52.75, y: 50}, {x: 53.91, y: 60}, {x: 55.01, y: 70}, {x: 56.08, y: 80}, {x: 57.10, y: 90},{x: 58.10, y: 100}],
            '200FL': [{x: 103.89, y: 1}, {x: 106.91, y: 10}, {x: 110.09, y: 20}, {x: 113.09, y: 30}, {x: 115.94, y: 40},{x: 118.65, y: 50}, {x: 121.25, y: 60}, {x: 123.74, y: 70}, {x: 126.14, y: 80}, {x: 128.44, y: 90},{x: 130.68, y: 100}],
            '100IM': [{x: 47.29, y: 1}, {x: 48.66, y: 10}, {x: 50.11, y: 20}, {x: 51.47, y: 30}, {x: 52.77, y: 40},{x: 54.01, y: 50}, {x: 55.19, y: 60}, {x: 56.32, y: 70}, {x: 57.41, y: 80}, {x: 58.46, y: 90},{x: 59.49, y: 100}],
            '200IM': [{x: 104.79, y: 1}, {x: 107.84, y: 10}, {x: 111.04, y: 20}, {x: 114.07, y: 30}, {x: 116.94, y: 40},{x: 119.68, y: 50}, {x: 122.30, y: 60}, {x: 124.81, y: 70}, {x: 127.23, y: 80}, {x: 129.56, y: 90},{x: 131.81, y: 100}],
            '400IM': [{x: 226.49, y: 1}, {x: 233.09, y: 10}, {x: 240.01, y: 20}, {x: 246.55, y: 30}, {x: 252.76, y: 40},{x: 258.68, y: 50}, {x: 264.35, y: 60}, {x: 269.78, y: 70}, {x: 275.00, y: 80}, {x: 280.02, y: 90},{x: 284.89, y: 100}]
        },
        LCM: {
            '50FR': [{x:21.89,y:1}, {x:22.53,y:10}, {x:23.21,y:20}, {x:23.85,y:30}, {x:24.46,y:40}, {x:25.04,y:50}, {x:25.59,y:60}, {x:26.13,y:70}, {x:26.64,y:80}, {x:27.13,y:90}, {x:27.62,y:100}],
            '100FR': [{x:47.11,y:1}, {x:48.52,y:10}, {x:49.99,y:20}, {x:51.39,y:30}, {x:52.72,y:40}, {x:53.98,y:50}, {x:55.19,y:60}, {x:56.35,y:70}, {x:57.47,y:80}, {x:58.54,y:90}, {x:59.59,y:100}],
            // Add other men's LCM events...
        },
        SCM: {
            '50FR': [{x:21.89,y:1}, {x:22.53,y:10}, {x:23.21,y:20}, {x:23.85,y:30}, {x:24.46,y:40}, {x:25.04,y:50}, {x:25.59,y:60}, {x:26.13,y:70}, {x:26.64,y:80}, {x:27.13,y:90}, {x:27.62,y:100}],
            '100FR': [{x:47.11,y:1}, {x:48.52,y:10}, {x:49.99,y:20}, {x:51.39,y:30}, {x:52.72,y:40}, {x:53.98,y:50}, {x:55.19,y:60}, {x:56.35,y:70}, {x:57.47,y:80}, {x:58.54,y:90}, {x:59.59,y:100}],
            // Add other men's SCM events...
        }

    },
    women: {
        SCY: {
            '50FR': [{x: 22.19, y: 1}, {x: 22.83, y: 10}, {x: 23.51, y: 20}, {x: 24.15, y: 30}, {x: 24.76, y: 40},{x: 25.34, y: 50}, {x: 25.89, y: 60}, {x: 26.43, y: 70}, {x: 26.94, y: 80}, {x: 27.43, y: 90},{x: 27.92, y: 100}],
            '100FR': [{x: 48.39, y: 1}, {x: 49.8, y: 10}, {x: 51.27, y: 20}, {x: 52.67, y: 30}, {x: 54, y: 40},{x: 55.26, y: 50}, {x: 56.47, y: 60}, {x: 57.63, y: 70}, {x: 58.75, y: 80}, {x: 59.82, y: 90},{x: 60.87, y: 100}],
            '200FR': [{x: 104.99, y: 1}, {x: 108.04, y: 10}, {x: 111.25, y: 20}, {x: 114.29, y: 30}, {x: 117.17, y: 40},{x: 119.91, y: 50}, {x: 122.54, y: 60}, {x: 125.05, y: 70}, {x: 127.47, y: 80}, {x: 129.8, y: 90},{x: 132.06, y: 100}],
            '500FR': [{x: 280.79, y: 1}, {x: 288.97, y: 10}, {x: 297.55, y: 20}, {x: 305.66, y: 30}, {x: 313.36, y: 40},{x: 320.7, y: 50}, {x: 327.72, y: 60}, {x: 334.45, y: 70}, {x: 340.93, y: 80}, {x: 347.16, y: 90},{x: 353.19, y: 100}],
            '1000FR': [{x: 579.99, y: 1}, {x: 596.89, y: 10}, {x: 614.61, y: 20}, {x: 631.36, y: 30}, {x: 647.27, y: 40},{x: 662.44, y: 50}, {x: 676.94, y: 60}, {x: 690.84, y: 70}, {x: 704.21, y: 80}, {x: 717.09, y: 90},{x: 729.53, y: 100}],
            '1650FR': [{x: 966.04, y: 1}, {x: 994.19, y: 10}, {x: 1023.71, y: 20}, {x: 1051.61, y: 30}, {x: 1078.11, y: 40},{x: 1103.37, y: 50}, {x: 1127.52, y: 60}, {x: 1150.68, y: 70}, {x: 1172.94, y: 80}, {x: 1194.39, y: 90},{x: 1215.11, y: 100}],
            '100BK': [{x: 52.39, y: 1}, {x: 53.91, y: 10}, {x: 55.51, y: 20}, {x: 57.03, y: 30}, {x: 58.46, y: 40},{x: 59.83, y: 50}, {x: 61.14, y: 60}, {x: 62.4, y: 70}, {x: 63.61, y: 80}, {x: 64.77, y: 90},{x: 65.9, y: 100}],
            '200BK': [{x: 113.89, y: 1}, {x: 117.2, y: 10}, {x: 120.68, y: 20}, {x: 123.97, y: 30}, {x: 127.1, y: 40},{x: 130.08, y: 50}, {x: 132.92, y: 60}, {x: 135.65, y: 70}, {x: 138.28, y: 80}, {x: 140.81, y: 90},{x: 143.26, y: 100}],
            '100BR': [{x: 59.79, y: 1}, {x: 61.53, y: 10}, {x: 63.35, y: 20}, {x: 65.08, y: 30}, {x: 66.72, y: 40},{x: 68.29, y: 50}, {x: 69.78, y: 60}, {x: 71.21, y: 70}, {x: 72.59, y: 80}, {x: 73.92, y: 90},{x: 75.21, y: 100}],
            '200BR': [{x: 129.49, y: 1}, {x: 133.26, y: 10}, {x: 137.22, y: 20}, {x: 140.96, y: 30}, {x: 144.51, y: 40},{x: 147.89, y: 50}, {x: 151.13, y: 60}, {x: 154.24, y: 70}, {x: 157.22, y: 80}, {x: 160.09, y: 90},{x: 162.88, y: 100}],
            '100FL': [{x: 52.19, y: 1}, {x: 53.71, y: 10}, {x: 55.3, y: 20}, {x: 56.81, y: 30}, {x: 58.24, y: 40},{x: 59.6, y: 50}, {x: 60.91, y: 60}, {x: 62.16, y: 70}, {x: 63.36, y: 80}, {x: 64.52, y: 90},{x: 65.65, y: 100}],
            '200FL': [{x: 115.89, y: 1}, {x: 119.26, y: 10}, {x: 122.8, y: 20}, {x: 126.15, y: 30}, {x: 129.33, y: 40},{x: 132.36, y: 50}, {x: 135.26, y: 60}, {x: 138.04, y: 70}, {x: 140.71, y: 80}, {x: 143.28, y: 90},{x: 145.77, y: 100}],
            '100IM': [{x: 52.99, y: 1}, {x: 54.53, y: 10}, {x: 56.15, y: 20}, {x: 57.68, y: 30}, {x: 59.13, y: 40},{x: 60.52, y: 50}, {x: 61.84, y: 60}, {x: 63.11, y: 70}, {x: 64.33, y: 80}, {x: 65.51, y: 90},{x: 66.66, y: 100}],
            '200IM': [{x: 116.49, y: 1}, {x: 119.88, y: 10}, {x: 123.44, y: 20}, {x: 126.8, y: 30}, {x: 130, y: 40},{x: 133.05, y: 50}, {x: 135.96, y: 60}, {x: 138.75, y: 70}, {x: 141.44, y: 80}, {x: 144.02, y: 90},{x: 146.53, y: 100}],
            '400IM': [{x: 250.09, y: 1}, {x: 257.37, y: 10}, {x: 265.01, y: 20}, {x: 272.24, y: 30}, {x: 279.1, y: 40},{x: 285.64, y: 50}, {x: 291.89, y: 60}, {x: 297.89, y: 70}, {x: 303.65, y: 80}, {x: 309.2, y: 90},{x: 314.57, y: 100}]
        },
        LCM: {
            '50FR': [{x: 25.49, y: 1}, {x: 26.23, y: 10}, {x: 27.01, y: 20}, {x: 27.74, y: 30}, {x: 28.44, y: 40},{x: 29.11, y: 50}, {x: 29.75, y: 60}, {x: 30.36, y: 70}, {x: 30.94, y: 80}, {x: 31.51, y: 90},{x: 32.07, y: 100}],
            '100FR': [{x: 55.69, y: 1}, {x: 57.31, y: 10}, {x: 59.01, y: 20}, {x: 60.62, y: 30}, {x: 62.15, y: 40},{x: 63.60, y: 50}, {x: 64.99, y: 60}, {x: 66.33, y: 70}, {x: 67.61, y: 80}, {x: 68.85, y: 90},{x: 70.05, y: 100}],
            '200FR': [{x: 120.39, y: 1}, {x: 123.89, y: 10}, {x: 127.57, y: 20}, {x: 131.05, y: 30}, {x: 134.35, y: 40},{x: 137.50, y: 50}, {x: 140.51, y: 60}, {x: 143.40, y: 70}, {x: 146.17, y: 80}, {x: 148.84, y: 90},{x: 151.43, y: 100}],
            '500FR': [{x: 251.79, y: 1}, {x: 259.12, y: 10}, {x: 266.82, y: 20}, {x: 274.09, y: 30}, {x: 281.00, y: 40},{x: 287.58, y: 50}, {x: 293.88, y: 60}, {x: 299.91, y: 70}, {x: 305.71, y: 80}, {x: 311.30, y: 90},{x: 316.71, y: 100}],
            '1000FR': [{x: 517.59, y: 1}, {x: 532.67, y: 10}, {x: 548.48, y: 20}, {x: 563.44, y: 30}, {x: 577.64, y: 40},{x: 591.17, y: 50}, {x: 604.11, y: 60}, {x: 616.52, y: 70}, {x: 628.44, y: 80}, {x: 639.94, y: 90},{x: 651.04, y: 100}],
            '1650FR': [{x: 990.89, y: 1}, {x: 1019.76, y: 10}, {x: 1050.04, y: 20}, {x: 1078.67, y: 30}, {x: 1105.85, y: 40},{x: 1131.75, y: 50}, {x: 1156.53, y: 60}, {x: 1180.28, y: 70}, {x: 1203.12, y: 80}, {x: 1225.12, y: 90},{x: 1246.36, y: 100}],
            '100BK': [{x: 60.29, y: 1}, {x: 62.04, y: 10}, {x: 63.88, y: 20}, {x: 65.63, y: 30}, {x: 67.28, y: 40},{x: 68.86, y: 50}, {x: 70.36, y: 60}, {x: 71.81, y: 70}, {x: 73.20, y: 80}, {x: 74.54, y: 90},{x: 75.84, y: 100}],
            '200BK': [{x: 130.59, y: 1}, {x: 134.39, y: 10}, {x: 138.38, y: 20}, {x: 142.15, y: 30}, {x: 145.74, y: 40},{x: 149.15, y: 50}, {x: 152.42, y: 60}, {x: 155.55, y: 70}, {x: 158.56, y: 80}, {x: 161.45, y: 90},{x: 164.26, y: 100}],
            '100BR': [{x: 68.89, y: 1}, {x: 70.89, y: 10}, {x: 73.00, y: 20}, {x: 74.99, y: 30}, {x: 76.88, y: 40},{x: 78.68, y: 50}, {x: 80.40, y: 60}, {x: 82.05, y: 70}, {x: 83.64, y: 80}, {x: 85.17, y: 90},{x: 86.66, y: 100}],
            '200BR': [{x: 148.49, y: 1}, {x: 152.81, y: 10}, {x: 157.35, y: 20}, {x: 161.64, y: 30}, {x: 165.71, y: 40},{x: 169.60, y: 50}, {x: 173.31, y: 60}, {x: 176.87, y: 70}, {x: 180.29, y: 80}, {x: 183.59, y: 90},{x: 186.78, y: 100}],
            '100FL': [{x: 60.09, y: 1}, {x: 61.84, y: 10}, {x: 63.67, y: 20}, {x: 65.41, y: 30}, {x: 67.06, y: 40},{x: 68.63, y: 50}, {x: 70.13, y: 60}, {x: 71.57, y: 70}, {x: 72.96, y: 80}, {x: 74.29, y: 90},{x: 75.59, y: 100}],
            '200FL': [{x: 132.89, y: 1}, {x: 136.76, y: 10}, {x: 140.82, y: 20}, {x: 144.66, y: 30}, {x: 148.30, y: 40},{x: 151.78, y: 50}, {x: 155.10, y: 60}, {x: 158.29, y: 70}, {x: 161.35, y: 80}, {x: 164.30, y: 90},{x: 167.16, y: 100}],
            '200IM': [{x: 133.59, y: 1}, {x: 137.48, y: 10}, {x: 141.56, y: 20}, {x: 145.42, y: 30}, {x: 149.08, y: 40},{x: 152.58, y: 50}, {x: 155.92, y: 60}, {x: 159.12, y: 70}, {x: 162.20, y: 80}, {x: 165.16, y: 90},{x: 168.04, y: 100}],
            '400IM': [{x: 285.79, y: 1}, {x: 294.11, y: 10}, {x: 302.85, y: 20}, {x: 311.10, y: 30}, {x: 318.94, y: 40},{x: 326.41, y: 50}, {x: 333.56, y: 60}, {x: 340.41, y: 70}, {x: 347.00, y: 80}, {x: 353.34, y: 90},{x: 359.48, y: 100}]
        },
        SCM: {
            '50FR': [{x: 24.59, y: 1}, {x: 25.30, y: 10}, {x: 26.05, y: 20}, {x: 26.76, y: 30}, {x: 27.44, y: 40},{x: 28.08, y: 50}, {x: 28.70, y: 60}, {x: 29.29, y: 70}, {x: 29.85, y: 80}, {x: 30.40, y: 90},{x: 30.93, y: 100}],
            '100FR': [{x: 53.39, y: 1}, {x: 54.94, y: 10}, {x: 56.57, y: 20}, {x: 58.11, y: 30}, {x: 59.58, y: 40},{x: 60.98, y: 50}, {x: 62.31, y: 60}, {x: 63.59, y: 70}, {x: 64.82, y: 80}, {x: 66.01, y: 90},{x: 67.16, y: 100}],
            '200FR': [{x: 116.49, y: 1}, {x: 119.88, y: 10}, {x: 123.44, y: 20}, {x: 126.80, y: 30}, {x: 130.00, y: 40},{x: 133.05, y: 50}, {x: 135.96, y: 60}, {x: 138.75, y: 70}, {x: 141.44, y: 80}, {x: 144.02, y: 90},{x: 146.53, y: 100}],
            '500FR': [{x: 244.59, y: 1}, {x: 251.71, y: 10}, {x: 259.19, y: 20}, {x: 266.25, y: 30}, {x: 272.96, y: 40},{x: 279.36, y: 50}, {x: 285.47, y: 60}, {x: 291.34, y: 70}, {x: 296.97, y: 80}, {x: 302.40, y: 90},{x: 307.65, y: 100}],
            '1000FR': [{x: 507.49, y: 1}, {x: 522.27, y: 10}, {x: 537.78, y: 20}, {x: 552.44, y: 30}, {x: 566.36, y: 40},{x: 579.63, y: 50}, {x: 592.32, y: 60}, {x: 604.49, y: 70}, {x: 616.18, y: 80}, {x: 627.45, y: 90},{x: 638.33, y: 100}],
            '1650FR': [{x: 977.29, y: 1}, {x: 1005.77, y: 10}, {x: 1035.63, y: 20}, {x: 1063.86, y: 30}, {x: 1090.67, y: 40},{x: 1116.22, y: 50}, {x: 1140.65, y: 60}, {x: 1164.08, y: 70}, {x: 1186.60, y: 80}, {x: 1208.30, y: 90},{x: 1229.26, y: 100}],
            '100BK': [{x: 57.79, y: 1}, {x: 59.47, y: 10}, {x: 61.23, y: 20}, {x: 62.90, y: 30}, {x: 64.49, y: 40},{x: 66.00, y: 50}, {x: 67.45, y: 60}, {x: 68.83, y: 70}, {x: 70.16, y: 80}, {x: 71.45, y: 90},{x: 72.69, y: 100}],
            '200BK': [{x: 126.39, y: 1}, {x: 130.07, y: 10}, {x: 133.93, y: 20}, {x: 137.58, y: 30}, {x: 141.05, y: 40},{x: 144.35, y: 50}, {x: 147.51, y: 60}, {x: 150.54, y: 70}, {x: 153.46, y: 80}, {x: 156.26, y: 90},{x: 158.98, y: 100}],
            '100BR': [{x: 65.99, y: 1}, {x: 67.91, y: 10}, {x: 69.92, y: 20}, {x: 71.83, y: 30}, {x: 73.64, y: 40},{x: 75.37, y: 50}, {x: 77.02, y: 60}, {x: 78.60, y: 70}, {x: 80.12, y: 80}, {x: 81.58, y: 90},{x: 83.01, y: 100}],
            '200BR': [{x: 143.69, y: 1}, {x: 147.87, y: 10}, {x: 152.26, y: 20}, {x: 156.41, y: 30}, {x: 160.36, y: 40},{x: 164.11, y: 50}, {x: 167.70, y: 60}, {x: 171.15, y: 70}, {x: 174.46, y: 80}, {x: 177.65, y: 90},{x: 180.74, y: 100}],
            '100FL': [{x: 57.59, y: 1}, {x: 59.26, y: 10}, {x: 61.02, y: 20}, {x: 62.69, y: 30}, {x: 64.27, y: 40},{x: 65.77, y: 50}, {x: 67.21, y: 60}, {x: 68.59, y: 70}, {x: 69.92, y: 80}, {x: 71.20, y: 90},{x: 72.44, y: 100}],
            '200FL': [{x: 128.59, y: 1}, {x: 132.33, y: 10}, {x: 136.26, y: 20}, {x: 139.98, y: 30}, {x: 143.50, y: 40},{x: 146.87, y: 50}, {x: 150.08, y: 60}, {x: 153.16, y: 70}, {x: 156.13, y: 80}, {x: 158.98, y: 90},{x: 161.75, y: 100}],
            '100IM': [{x: 58.49, y: 1}, {x: 60.19, y: 10}, {x: 61.98, y: 20}, {x: 63.67, y: 30}, {x: 65.27, y: 40},{x: 66.80, y: 50}, {x: 68.26, y: 60}, {x: 69.66, y: 70}, {x: 71.01, y: 80}, {x: 72.31, y: 90},{x: 73.57, y: 100}],
            '200IM': [{x: 129.29, y: 1}, {x: 133.05, y: 10}, {x: 137.00, y: 20}, {x: 140.74, y: 30}, {x: 144.29, y: 40},{x: 147.67, y: 50}, {x: 150.90, y: 60}, {x: 154.00, y: 70}, {x: 156.98, y: 80}, {x: 159.85, y: 90},{x: 162.63, y: 100}],
            '400IM': [{x: 277.59, y: 1}, {x: 285.67, y: 10}, {x: 294.16, y: 20}, {x: 302.18, y: 30}, {x: 309.79, y: 40},{x: 317.05, y: 50}, {x: 323.99, y: 60}, {x: 330.64, y: 70}, {x: 337.04, y: 80}, {x: 343.20, y: 90},{x: 349.16, y: 100}]
        }
    }
};

function updateEvents() {
    const gender = document.getElementById('genderSelect').value;
    const course = document.getElementById('courseSelect').value;
    const eventSelect = document.getElementById('eventSelect');
    
    eventSelect.innerHTML = '';
    const events = Object.keys(eventData[gender][course]);
    
    events.forEach(event => {
        const option = document.createElement('option');
        option.value = event;
        option.textContent = eventToName(event);
        eventSelect.appendChild(option);
    });
}

function eventToName(abbr) {
    const names = {
        'FR': 'Freestyle', 'BK': 'Backstroke',
        'BR': 'Breaststroke', 'FL': 'Butterfly',
        'IM': 'Individual Medley'
    };
    const distance = abbr.replace(/[^\d]/g, '');
    const stroke = abbr.replace(distance, '');
    return `${distance} ${names[stroke]}`;
}

function computeCoefficients(data) {
    const n = data.length;
    const coefficients = data.map(d => d.y);
    for (let j = 1; j < n; j++) {
        for (let i = n - 1; i >= j; i--) {
            coefficients[i] = (coefficients[i] - coefficients[i-1]) / (data[i].x - data[i-j].x);
        }
    }
    return coefficients;
}

function evaluatePolynomial(x, data, coeffs) {
    let result = coeffs[coeffs.length - 1];
    for (let i = coeffs.length - 2; i >= 0; i--) {
        result = result * (x - data[i].x) + coeffs[i];
    }
    return result;
}

function findNearestPoints(x, data) {
    let low = 0, high = data.length - 1;
    while (low <= high) {
        const mid = (low + high) >> 1;
        if (Math.abs(data[mid].x - x) < 1e-9) return {exact: mid};
        data[mid].x < x ? low = mid + 1 : high = mid - 1;
    }
    return {left: high, right: low};
}

function calculatePowerIndex() {
    const gender = document.getElementById('genderSelect').value;
    const course = document.getElementById('courseSelect').value;
    const event = document.getElementById('eventSelect').value;
    const resultDiv = document.getElementById('result');

    // Get time inputs
    const minutes = parseFloat(document.getElementById('minutesInput').value) || 0;
    const seconds = parseFloat(document.getElementById('secondsInput').value) || 0;
    const milliseconds = parseFloat(document.getElementById('millisecondsInput').value) || 0;

    // Validate inputs
    if (isNaN(minutes) || isNaN(seconds) || isNaN(milliseconds) ||
        seconds >= 60 || milliseconds >= 100) {
        showResult("Invalid time input!", "error");
        return;
    }

    // Convert time to total seconds
    const inputTime = minutes * 60 + seconds + milliseconds / 100;

    const data = eventData[gender]?.[course]?.[event];

    if (!data) {
        showResult("Invalid input parameters!", "error");
        return;
    }

    const nearest = findNearestPoints(inputTime, data);

    const coeffs = computeCoefficients(data);
    const powerIndex = evaluatePolynomial(inputTime, data, coeffs);

    const minTime = data[0].x, maxTime = data[data.length - 1].x;
    if (inputTime < minTime || inputTime > maxTime) {
        showResult(`Warning: Extrapolation beyond ${minTime}-${maxTime}s range!`, "warning");
    }

    const valid = (powerIndex >= data[0].y && powerIndex <= data[data.length - 1].y);
    showResult(valid ?
        `Power Index: ${powerIndex.toFixed(2)}` :
        "Calculation error - invalid result",
        valid ? "success" : "error");
}

function showResult(message, type) {
    const resultDiv = document.getElementById('result');
    resultDiv.textContent = message;
    resultDiv.style.display = "block";
    resultDiv.style.backgroundColor = 
        type === "success" ? "#e8f5e9" :
        type === "warning" ? "#fff3e0" : "#ffebee";
}

// Initialize on load
updateEvents();