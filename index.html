<!DOCTYPE html>
<html>
<head>
    <title>Power Index Calculator [Beta]</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background-color: #f4f4f4;
        }
        .form-container {
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            max-width: 500px;
            margin: 0 auto;
            display: none; /* Hidden by default */
        }
        .form-container h2 {
            text-align: center;
        }
        .form-container label {
            font-weight: bold;
        }
        .form-container select,
        .form-container input[type="number"],
        .form-container input[type="submit"] {
            width: 100%;
            padding: 10px;
            margin: 8px 0;
            font-size: 16px;
            border: 1px solid #ccc;
            border-radius: 4px;
        }
        #result {
            font-size: 18px;
            font-weight: bold;
            color: #333;
        }
        .time-input {
            display: flex;
            gap: 10px;
        }
        .time-input input {
            width: calc(33% - 7px);
        }
        .password-container {
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            max-width: 500px;
            margin: 0 auto;
            text-align: center;
        }
        .password-container input[type="password"],
        .password-container button {
            width: 100%;
            padding: 10px;
            margin: 8px 0;
            font-size: 16px;
            border: 1px solid #ccc;
            border-radius: 4px;
        }
        .error-message {
            color: red;
            font-size: 14px;
        }
    </style>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
</head>
<body>
    <div class="password-container" id="password-container">
        <h2>Enter Password</h2>
        <p>Please enter the password to access the Power Index Calculator.</p>
        <input type="password" id="password" placeholder="Enter Password">
        <button onclick="checkPassword()">Submit</button>
        <p class="error-message" id="error-message" style="display: none;">Incorrect password. Try again.</p>
    </div>

    <div class="form-container" id="form-container">
        <h2>Power Index Calculator [Beta]</h2>
        <p>Please select a gender, event and time.</p>
        
        <form id="power-index-form">
            <!-- Gender drop-down -->
            <label for="gender">Select Gender:</label>
            <select id="gender" name="gender" required>
                <option value="men">Men</option>
                <option value="women">Women</option>
            </select>

            <!-- Event drop-down -->
            <label for="event">Select Event:</label>
            <select id="event" name="event" required>
                <option value="50 Free">50 Free</option>
                <option value="100 Free">100 Free</option>
                <option value="200 Free">200 Free</option>
                <option value="500 Free">500 Free</option>
                <option value="1000 Free">1000 Free</option>
                <option value="1650 Free">1650 Free</option>
                <option value="100 Back">100 Back</option>
                <option value="200 Back">200 Back</option>
                <option value="100 Breast">100 Breast</option>
                <option value="200 Breast">200 Breast</option>
                <option value="100 Fly">100 Fly</option>
                <option value="200 Fly">200 Fly</option>
                <option value="100 IM">100 IM</option>
                <option value="200 IM">200 IM</option>
                <option value="400 IM">400 IM</option>
            </select>
            
            <!-- Input for time in MM:SS.mm format -->
            <label for="time">Enter Time:</label>
            <div class="time-input">
                <input type="number" id="minutes" name="minutes" placeholder="MM" required min="0">
                <input type="number" id="seconds" name="seconds" placeholder="SS" required min="0" max="59">
                <input type="number" id="milliseconds" name="milliseconds" placeholder="mm" required min="0" max="99">
            </div>
            
            <input type="submit" value="Calculate">
        </form>

        <p id="result"></p>
    </div>

    <script>
        const correctPassword = "GODAWGS"; // Password

        // Function to check password
        function checkPassword() {
            const enteredPassword = document.getElementById("password").value;
            const errorMessage = document.getElementById("error-message");
            const passwordContainer = document.getElementById("password-container");
            const formContainer = document.getElementById("form-container");

            if (enteredPassword === correctPassword) {
                errorMessage.style.display = "none";
                passwordContainer.style.display = "none";
                formContainer.style.display = "block";
            } else {
                errorMessage.style.display = "block";
            }
        }

        // Constants for men and women
        const constants = {
            men: {
                "50 Free": { a: -0.0001121071, b: 0.061821918, c: 19.44 },
                "100 Free": { a: -0.0002517676, b: 0.136744618, c: 42.89 },
                "200 Free": { a: -0.0005572378, b: 0.300618098, c: 94.19 },
                "500 Free": { a: -0.0015259468, b: 0.820294698, c: 256.89 },
                "1000 Free": { a: -0.0031876096, b: 1.711715418, c: 535.99 },
                "1650 Free": { a: -0.0053074777, b: 2.848946358, c: 892.04 },
                "100 Back": { a: -0.0002731624, b: 0.148222138, c: 46.49 },
                "200 Back": { a: -0.0006041875, b: 0.325804878, c: 102.09 },
                "100 Breast": { a: -0.000310009, b: 0.167988978, c: 52.69 },
                "200 Breast": { a: -0.000678475, b: 0.365657378, c: 114.59 },
                "100 Fly": { a: -0.0002707852, b: 0.146946858, c: 46.09 },
                "200 Fly": { a: -0.0006136963, b: 0.330905998, c: 103.69 },
                "100 IM": { a: -0.0002773225, b: 0.150453878, c: 47.19 },
                "200 IM": { a: -0.000619045, b: 0.333775378, c: 104.59 },
                "400 IM": { a: -0.0013423081, b: 0.721779318, c: 226.09 }
            },
            women: {
                "50 Free": { a: -0.0001262429, b: 0.0710661, c: 22.1374875 },
                "100 Free": { a: -0.0002810849, b: 0.1546441, c: 48.277351 },
                "200 Free": { a: -0.0006155909, b: 0.3351981, c: 104.746998 },
                "500 Free": { a: -0.0016545689, b: 0.8960001, c: 280.141539 },
                "1000 Free": { a: -0.0034228409, b: 1.8504481, c: 578.650894 },
                "1650 Free": { a: -0.0057043964, b: 3.0819476, c: 963.8100395 },
                "100 Back": { a: -0.0003047249, b: 0.1674041, c: 52.267751 },
                "200 Back": { a: -0.0006681899, b: 0.3635891, c: 113.625638 },
                "100 Breast": { a: -0.0003484589, b: 0.1910101, c: 59.649991 },
                "200 Breast": { a: -0.0007603859, b: 0.4133531, c: 129.188198 },
                "100 Fly": { a: -0.0003035429, b: 0.1667661, c: 52.068231 },
                "200 Fly": { a: -0.0006800099, b: 0.3699691, c: 115.620838 },
                "100 IM": { a: -0.0003082709, b: 0.1693181, c: 52.866311 },
                "200 IM": { a: -0.0006835559, b: 0.3718831, c: 116.219398 },
                "400 IM": { a: -0.0014731319, b: 0.7980671, c: 249.509732 }
            }
        };

        // Confetti trigger
        function triggerConfetti() {
            confetti({
                particleCount: 150,
                spread: 100,
                origin: { y: 0.6 }
            });
        }

        // Handle form submission
        document.getElementById("power-index-form").addEventListener("submit", function (e) {
            e.preventDefault();

            const gender = document.getElementById("gender").value;
            const selectedEvent = document.getElementById("event").value;
            const minutes = parseInt(document.getElementById("minutes").value) || 0;
            const seconds = parseInt(document.getElementById("seconds").value) || 0;
            const milliseconds = parseInt(document.getElementById("milliseconds").value) || 0;

            const inputTime = minutes * 60 + seconds + milliseconds / 100;

            const { a, b, c } = constants[gender][selectedEvent];

            const discriminant = Math.pow(b, 2) - 4 * a * (c - inputTime);

            if (discriminant < 0) {
                document.getElementById("result").innerText = `No real solution for ${selectedEvent} (${gender}) with time ${inputTime.toFixed(2)} seconds.`;
                return;
            }

            const xValue = (-b + Math.sqrt(discriminant)) / (2 * a);

            document.getElementById("result").innerText = `Result for ${selectedEvent} (${gender}): Power Index = ${xValue.toFixed(2)}`;

            triggerConfetti();
        });
    </script>
</body>
</html>
